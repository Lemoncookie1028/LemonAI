<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lemon AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        #container {
            width: 90%;
            max-width: 600px;
            background: white;
            margin: 50px auto;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        #chatbox {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            background: #fff;
            border-radius: 5px;
        }
        input, button, select {
            width: calc(100% - 22px);
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>

    <div id="container">
        <h1>üçã Lemon AI</h1>
        <div id="chatbox"></div>

        <input type="text" id="userInput" placeholder="Type a message..." />
        <button onclick="sendMessage()">Send</button>

        <label for="voiceSelect">üîä Choose a voice:</label>
        <select id="voiceSelect"></select>
    </div>

    <script>
        // Initialize Speech Synthesis
        const synth = window.speechSynthesis;
        let voices = [];

        function loadVoices() {
            voices = synth.getVoices();
            const voiceSelect = document.getElementById("voiceSelect");
            
            voiceSelect.innerHTML = ""; // Clear previous options
            voices.forEach((voice, index) => {
                const option = document.createElement("option");
                option.value = index;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            const selectedVoiceIndex = document.getElementById("voiceSelect").value;
            if (voices.length > 0) utterance.voice = voices[selectedVoiceIndex];
            synth.speak(utterance);
        }

        if (synth.onvoiceschanged !== undefined) synth.onvoiceschanged = loadVoices;
        window.onload = loadVoices;

        const responses = {
            "hello": ["Hello! How can I assist you?", "Hi there!", "Hey!"],
            "how are you": ["I'm doing great! How about you?", "I'm here to help!"],
            "tell me a joke": [
                "Why did the math book look sad? Because it had too many problems!",
                "What do you call cheese that isn‚Äôt yours? Nacho cheese!"
            ],
            "bye": ["Goodbye! Have a great day!", "See you later!"],
            "weather": ["I can't check the weather, but you can look outside or use a weather app!"],
            "name": ["I'm Lemon AI, your assistant.", "You can call me Lemon AI!"]
        };

        function getAIResponse(userInput) {
            let input = userInput.toLowerCase();
            for (let key in responses) {
                if (input.includes(key)) {
                    let response = responses[key][Math.floor(Math.random() * responses[key].length)];
                    speak(response);
                    return response;
                }
            }
            let defaultResponse = "I'm not sure how to respond to that.";
            speak(defaultResponse);
            return defaultResponse;
        }

        function sendMessage() {
            let userInput = document.getElementById("userInput").value.trim();
            if (userInput === "") return;

            let chatbox = document.getElementById("chatbox");
            chatbox.innerHTML += `<p><strong>You:</strong> ${userInput}</p>`;

            let botResponse = getAIResponse(userInput);
            chatbox.innerHTML += `<p><strong>Lemon AI:</strong> ${botResponse}</p>`;

            document.getElementById("userInput").value = "";
            chatbox.scrollTop = chatbox.scrollHeight;
        }
    </script>

</body>
</html>
